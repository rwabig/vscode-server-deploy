###############################################################################
# AUTHELIA CORE CONFIGURATION
###############################################################################

theme: auto
default_redirection_url: https://{{ domain_name }}/

server:
  address: unix:///run/authelia/authelia.sock
  buffers:
    read: 4096
    write: 4096

log:
  level: info
  format: text

###############################################################################
# TOTP / 2FA (OPTIONAL — ENABLE LATER IF NEEDED)
###############################################################################
totp:
  issuer: {{ domain_name }}

###############################################################################
# AUTHENTICATION BACKEND
###############################################################################
authentication_backend:
  password_reset:
    disable: true

  file:
    path: /config/users_database.yml
    password:
      algorithm: argon2id
      iterations: 3
      key_length: 32
      salt_length: 16
      parallelism: 4
      memory: 64MB

###############################################################################
# ACCESS CONTROL
###############################################################################
access_control:
  default_policy: deny

  rules:
    - domain: {{ domain_name }}
      policy: one_factor

###############################################################################
# SESSION MANAGEMENT
###############################################################################
session:
  name: authelia_session
  same_site: lax
  expiration: 12h
  inactivity: 30m
  remember_me_duration: 7d

  cookies:
    - domain: {{ domain_name }}
      authelia_url: https://{{ domain_name }}/authelia

  secret:
    file: /secrets/session_secret

###############################################################################
# REGULATION (ANTI-BRUTEFORCE)
###############################################################################
regulation:
  max_retries: 5
  find_time: 2m
  ban_time: 15m

###############################################################################
# STORAGE (LOCAL SQLITE)
###############################################################################
storage:
  encryption_key:
    file: /secrets/storage_secret
  local:
    path: /data/authelia.sqlite3

###############################################################################
# NOTIFIER (DISABLED — SAFE DEFAULT)
###############################################################################
notifier:
  disable_startup_check: true
  filesystem:
    filename: /data/notification.txt

###############################################################################
# TELEMETRY
###############################################################################
telemetry:
  metrics:
    enabled: false

###############################################################################
# IDENTITY VALIDATION
###############################################################################
identity_validation:
  reset_password:
    jwt_secret:
      file: /secrets/jwt_secret
